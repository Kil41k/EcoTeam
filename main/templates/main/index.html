{%extends 'main/base.html'%}
{%load static%}
{%block content%}
<div class="main-container">
    <aside class="sidebar">
      <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
      {% for cat in cats %}
          <a class="category" href="{% url 'category' cat.id %}">{{ cat.title }}</a>
      {% endfor %}

      <h3 class="city-heading">–ü–æ –≥–æ—Ä–æ–¥–∞–º</h3>
        <a class="category city-category" href="?city=–ê–∫—Ç–∞—É">–ñ–∞—Ä–∫–µ–Ω—Ç</a>
        <a class="category city-category" href="?city=–ê–ª–º–∞—Ç—ã">–ê–ª–º–∞—Ç—ã</a>
        <a class="category city-category" href="?city=–ê—Å—Ç–∞–Ω–∞">–ê—Å—Ç–∞–Ω–∞</a>
        <a class="category city-category" href="?city=–®—ã–º–∫–µ–Ω—Ç">–®—ã–º–∫–µ–Ω—Ç</a>
        <a class="category city-category" href="?city=–ö–∞—Ä–∞–≥–∞–Ω–¥–∞">–ö–∞—Ä–∞–≥–∞–Ω–¥–∞</a>
        
    </aside>

    {% if query %}
    <h2 class="search-heading">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ "{{ query }}":</h2>
    {% if users.exists %}
      <div class="user-card-container">
        {% for user in users %}
          <a href="{% url 'profile' user.id %}" class="user-card">
            <img src="{{ user.profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä {{ user.username }}" class="user-avatar">
            <div class="user-info">
              <p class="user-name">{{ user.username }}</p>
              <p class="user-role">–£—á–∞—Å—Ç–Ω–∏–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</p>
            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <p class="no-results">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
    {% endif %}
  {% endif %}
  

    <main class="content">
      <section class="hero">
        <h1>–°–æ–∑–¥–∞–π –∫–æ–º–∞–Ω–¥—É –¥–ª—è —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</h1>
        <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –ª—é–¥—è–º, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –º–µ–Ω—è—Ç—å –º–∏—Ä –∫ –ª—É—á—à–µ–º—É</p>
        <a class="nav-link" href="{%url 'create'%}"><button>–°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É</button></a>
      </section>

      <form method="GET" action="{% url 'index' %}">
        <section class="search-section">
          <div class="search-container">
            <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∞–º" value="{{ request.GET.q }}" />
            <button id="searchBtn" aria-label="–ü–æ–∏—Å–∫"> –ü–æ–∏—Å–∫ </button>
          </div>
        </section>
      </form>

      <section class="projects">
        <h2>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
        {%for proj in projs%}
        <div class="project-card">
          <img src="{{proj.image.url}}" alt="Project Image" />
          <div class="project-info">
            <div>
              <h3>{{proj.title}}</h3>
              <p>{{proj.description}}</p>
            </div>
            <div>
              <a href="{%url 'about' proj.id%}"><button class="join-button">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button></a>
              <div class="participant-count">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {{proj.participants.count}}</div>
            </div>
          </div>
        </div>
        {%endfor%}
      </section>
    </main>
  </div>
{%endblock%}
